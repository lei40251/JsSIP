<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="icon" href="data:image/ico;base64,aWNv" />
  <link href="./bootstrap-5.1.3-dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <link rel="stylesheet" href="./bootstrap-icons-1.8.1/bootstrap-icons.css">
  <link rel="stylesheet" href="./style/style.css">
  <title>CRTC 实时音视频 Demo</title>
</head>

<body style="margin: 0">
  <nav class="navbar navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">
        <img src="./imgs/logo.svg" alt="" width="26" class="d-inline-block align-text-top">
        CRTC 实时音视频 Demo
      </a>
    </div>
  </nav>
  <div style="height: 310px;" class="bg-light row row-cols-2 m-2 text-center" id="video_area">
    <div class="position-relative h-100">
      <div class="position-absolute top-50 opacity-50 start-0 text-start bg-light" style="font-size: 11px">
        上行速率: <span id="upS"></span><br>
        下行速率: <span id="downS"></span><br>
        下行丢包率: <span id="downL"></span><br>
        上行分辨率: <span id="upF"></span><br>
        下行分辨率: <span id="downF"></span><br>
        uNQ: <span id="uNQ"></span><br>
      </div>
      <div class=" opacity-50 start-0 text-start bg-light" style="font-size: 11px">
        上行速率: <span id="eupS"></span><br>
        下行速率: <span id="edownS"></span><br>
        下行丢包率: <span id="edownL"></span><br>
        上行分辨率: <span id="eupF"></span><br>
        下行分辨率: <span id="edownF"></span><br>
        dNQ: <span id="dNQ"></span><br>
      </div>
    </div>
  </div>
  <div class="bg-light p-2 m-2" id="ele">
    <div class="row">
      <div class="col col-8">
        <div class="col col-12 row mt-3">
          <div class="col col-auto row">
            <div class="col col-auto">
              <div class="input-group">
                <input class="form-control" type="text" value="7309" placeholder="请输入要呼叫的号码" id="callee" />
              </div>
            </div>
            <div class="col col-auto">
              <button class="btn btn-warning" id="callVideoSendonly"><i class="bi-camera-video"></i> 外呼</button>
              <button class="btn btn-danger" id="cancel"><i class="bi-telephone-x"></i> 挂机/取消</button>
              <button class="btn btn-primary" id="answerVideo"><i class="bi-camera-video"></i> 接听</button>
            </div>
          </div>
        </div>
      </div>
      <div class="col col-4 align-items-stretch">
        <div class="bg-light border-1 p-2 rounded border border-1 overflow-auto" style="max-height: 230px;">
          <pre id="status" class="w-100 overflow-hidden h-auto mb-0"
            style="font-size: 11px;line-height: 1.2; color: #666; font-family: 'Microsoft YaHei', Arial, Helvetica, sans-serif;"></pre>
        </div>
      </div>
    </div>
  </div>
  <canvas id="captureView" style="width: 240px;"></canvas>
  <div class="hide">
    <img id="pic_s" style="height: 100%;" src="../pic.png" alt="" />
    <video playsinline x5-video-player-fullscreen=" true" x5-video-player-type="h5" id="video_s" src="" loop muted
      style="height: 100%" controls></video>
  </div>

  <script src="./js/eruda.js"></script>
  <script>eruda.init();</script>
  <script src="./js/jquery-3.3.1.min.js"></script>
  <script src="./js/html2canvas.min.js"></script>
  <script src="./js/adapter-latest.js"></script>
  <script>
    /* 对日志的处理 */
    window.CLog = console;
    let consoleHolder = window.CLog;

    function debug(bool) {
      if (!bool) {
        consoleHolder = window.CLog;
        window.CLog = {};
        Object.keys(consoleHolder).forEach(function (key) {
          window.CLog[key] = function () {
            // 这里可以写自己方法上传到服务器等
            // eslint-disable-next-line prefer-rest-params
            console.log(...arguments);
          };
        });
      }
      else {
        window.CLog = consoleHolder;
      }
    }

    debug(false);
    // 结束
  </script>
  <script src="../../dist/CRTC.min.js"></script>
  <!-- <script src="./js/app.js"></script> -->
  <script>
    const testResult = {
      // 记录上行网络质量数据
      uplinkNetworkQualities: [],
      // 记录下行网络质量数据
      downlinkNetworkQualities: [],
      average: {
        uplinkNetworkQuality: 0,
        downlinkNetworkQuality: 0
      }
    };
  </script>
  <script src="./js/caller.js"></script>
  <script src="./js/callee.js"></script>
</body>

</html>